<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>个人资料 - Sonice在线游戏平台</title>
    <link rel="stylesheet" href="src/css/base.css">
    <link rel="stylesheet" href="src/css/profile.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-dark text-light">
    <!-- 主容器 -->
    <div class="container">
        <!-- 头部导航 -->
        <header class="site-header">
            <div class="logo">
                <a href="index.html">
                    <img src="src/images/logo.png" alt="Sonice在线游戏">
                </a>
            </div>
            <nav class="main-nav">
                <ul>
                    <li><a href="index.html">首页</a></li>
                    <li><a href="games.html">游戏</a></li>
                    <li><a href="ranking.html">排行榜</a></li>
                    <li><a href="community.html">社区</a></li>
                    <li><a href="about.html">关于我们</a></li>
                </ul>
            </nav>
            <div class="user-actions">
                <!-- 未登录状态 -->
                <div id="guest-actions">
                    <a href="login.html" class="btn btn-login">登录</a>
                    <a href="register.html" class="btn btn-register">注册</a>
                </div>
                <!-- 已登录状态 -->
                <div id="user-menu" style="display: none;">
                    <div class="user-avatar">
                        <img id="header-avatar" src="src/images/avatars/default.jpg" alt="用户头像">
                    </div>
                    <div class="dropdown">
                        <span id="header-username">用户名</span>
                        <i class="fas fa-angle-down"></i>
                        <div class="dropdown-content">
                            <a href="profile.html"><i class="fas fa-user"></i> 个人资料</a>
                            <a href="messages.html"><i class="fas fa-envelope"></i> 消息中心</a>
                            <a href="settings.html"><i class="fas fa-cog"></i> 设置</a>
                            <a href="#" id="logout-button"><i class="fas fa-sign-out-alt"></i> 退出登录</a>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        
        <div class="main-content">
            <!-- 侧边栏 -->
            <aside class="sidebar">
                <div class="sidebar-header">
                    <img src="src/images/logo-small.png" alt="Sonice" class="sidebar-logo">
                    <button class="sidebar-toggle">
                        <i class="fas fa-bars"></i>
                    </button>
                </div>
                
                <nav class="sidebar-nav">
                    <a href="index.html" class="sidebar-link">
                        <div class="sidebar-icon">
                            <i class="fas fa-home"></i>
                        </div>
                        <span class="sidebar-item">首页</span>
                    </a>
                    <a href="games.html" class="sidebar-link">
                        <div class="sidebar-icon">
                            <i class="fas fa-gamepad"></i>
                        </div>
                        <span class="sidebar-item">游戏</span>
                    </a>
                    <a href="favorites.html" class="sidebar-link">
                        <div class="sidebar-icon icon-favorites">
                            <i class="fas fa-heart"></i>
                        </div>
                        <span class="sidebar-item">收藏</span>
                        <span class="ml-auto bg-purple-primary px-2 py-0.5 rounded-full text-xs text-white favorites-count">0</span>
                    </a>
                    <a href="ranking.html" class="sidebar-link">
                        <div class="sidebar-icon">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <span class="sidebar-item">排行榜</span>
                    </a>
                    <a href="community.html" class="sidebar-link">
                        <div class="sidebar-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <span class="sidebar-item">社区</span>
                    </a>
                    <a href="about.html" class="sidebar-link">
                        <div class="sidebar-icon">
                            <i class="fas fa-info-circle"></i>
                        </div>
                        <span class="sidebar-item">关于我们</span>
                    </a>
                </nav>
                
                <div class="sidebar-footer">
                    <a href="support.html" class="sidebar-link">
                        <div class="sidebar-icon">
                            <i class="fas fa-question-circle"></i>
                        </div>
                        <span class="sidebar-item">帮助</span>
                    </a>
                    <div class="sidebar-copyright">
                        &copy; 2023 Sonice
                    </div>
                </div>
            </aside>
            
            <!-- 主要内容 -->
            <main class="content">
                <!-- 未登录提示 -->
                <div id="notLoggedIn" class="not-logged-in">
                    <div class="not-logged-in-icon">
                        <i class="fas fa-user-lock"></i>
                    </div>
                    <h2 class="text-xl font-bold mb-4">您需要登录才能查看个人资料</h2>
                    <p class="text-gray-400 mb-6">请登录或注册一个新账号来访问您的个人资料页面</p>
                    <div class="flex justify-center gap-4">
                        <a href="login.html" class="btn btn-primary">
                            <i class="fas fa-sign-in-alt btn-icon"></i>登录
                        </a>
                        <a href="register.html" class="btn btn-secondary">
                            <i class="fas fa-user-plus btn-icon"></i>注册
                        </a>
                    </div>
                </div>
                
                <!-- 已登录内容 -->
                <div id="profileContent" class="profile-content" style="display: none;">
                    <!-- 个人资料头部 -->
                    <div class="profile-header mb-8">
                        <div class="profile-cover"></div>
                        <div class="profile-avatar-container">
                            <img src="src/images/avatars/default.jpg" alt="用户头像" class="profile-avatar" id="userAvatar">
                            <div class="avatar-badge" id="changeAvatarBtn">
                                <i class="fas fa-camera text-white"></i>
                            </div>
                        </div>
                        <div class="profile-stats p-4 pt-6">
                            <h1 class="text-2xl font-bold mb-1" id="displayUsername">用户名</h1>
                            <p class="text-gray-400 mb-4" id="memberSince">会员自: 2023年6月</p>
                            <div class="flex gap-6">
                                <div class="stat">
                                    <span class="text-xl font-bold" id="gamesPlayedCount">0</span>
                                    <span class="text-gray-400 ml-1">游戏</span>
                                </div>
                                <div class="stat">
                                    <span class="text-xl font-bold" id="favoritesCount">0</span>
                                    <span class="text-gray-400 ml-1">收藏</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 标签页导航 -->
                    <div class="tabs-container flex mb-6">
                        <button class="tab-button active" data-tab="profile">
                            <i class="fas fa-user mr-2"></i>个人资料
                        </button>
                        <button class="tab-button" data-tab="favorites">
                            <i class="fas fa-heart mr-2"></i>我的收藏
                        </button>
                        <button class="tab-button" data-tab="history">
                            <i class="fas fa-history mr-2"></i>游戏记录
                        </button>
                        <button class="tab-button" data-tab="security">
                            <i class="fas fa-shield-alt mr-2"></i>账号安全
                        </button>
                    </div>

                    <!-- 内容部分 -->
                    <div class="tab-content">
                        <!-- 个人资料标签页 -->
                        <section id="profileTab" class="tab-pane active">
                            <div class="content-section mb-6">
                                <div class="section-header flex justify-between items-center p-4">
                                    <h2 class="text-xl font-bold">个人信息</h2>
                                    <button class="btn btn-secondary" id="toggleEditProfile">
                                        <i class="fas fa-edit mr-2"></i>编辑
                                    </button>
                                </div>
                                <div class="p-6">
                                    <!-- 查看模式 -->
                                    <div id="viewProfileMode">
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                            <div>
                                                <h3 class="text-gray-400 mb-1">用户名</h3>
                                                <p class="text-xl" id="viewUsername">用户名</p>
                                            </div>
                                            <div>
                                                <h3 class="text-gray-400 mb-1">电子邮箱</h3>
                                                <p class="text-xl" id="viewEmail">user@example.com</p>
                                            </div>
                                            <div>
                                                <h3 class="text-gray-400 mb-1">显示名称</h3>
                                                <p class="text-xl" id="viewDisplayName">显示名称</p>
                                            </div>
                                            <div>
                                                <h3 class="text-gray-400 mb-1">所在地区</h3>
                                                <p class="text-xl" id="viewLocation">中国</p>
                                            </div>
                                        </div>
                                        <div class="mt-6">
                                            <h3 class="text-gray-400 mb-1">个人简介</h3>
                                            <p id="viewBio">这个人很懒，什么也没留下...</p>
                                        </div>
                                    </div>

                                    <!-- 编辑模式 -->
                                    <form id="editProfileForm" style="display: none;">
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                            <div class="form-group">
                                                <label for="username" class="form-label">用户名</label>
                                                <input type="text" id="username" class="form-input" disabled>
                                                <small class="text-gray-400">用户名无法更改</small>
                                            </div>
                                            <div class="form-group">
                                                <label for="email" class="form-label">电子邮箱</label>
                                                <input type="email" id="email" class="form-input">
                                                <div class="form-error" id="emailError"></div>
                                            </div>
                                            <div class="form-group">
                                                <label for="displayName" class="form-label">显示名称</label>
                                                <input type="text" id="displayName" class="form-input">
                                                <div class="form-error" id="displayNameError"></div>
                                            </div>
                                            <div class="form-group">
                                                <label for="location" class="form-label">所在地区</label>
                                                <select id="location" class="form-select">
                                                    <option value="">选择地区</option>
                                                    <option value="中国">中国</option>
                                                    <option value="美国">美国</option>
                                                    <option value="日本">日本</option>
                                                    <option value="韩国">韩国</option>
                                                    <option value="英国">英国</option>
                                                    <option value="其他">其他</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="form-group mt-2">
                                            <label for="bio" class="form-label">个人简介</label>
                                            <textarea id="bio" class="form-textarea" placeholder="介绍一下自己..."></textarea>
                                            <div class="form-error" id="bioError"></div>
                                        </div>
                                        <div class="flex justify-end mt-6 gap-3">
                                            <button type="button" class="btn btn-secondary" id="cancelEditProfile">取消</button>
                                            <button type="submit" class="btn btn-primary">
                                                <i class="fas fa-save mr-2"></i>保存修改
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </section>

                        <!-- 收藏标签页 -->
                        <section id="favoritesTab" class="tab-pane">
                            <div class="content-section">
                                <div class="section-header p-4">
                                    <h2 class="text-xl font-bold">我收藏的游戏</h2>
                                </div>
                                <div class="p-6">
                                    <div id="noFavorites" class="text-center py-10 text-gray-400">
                                        <i class="fas fa-heart-broken text-4xl mb-4"></i>
                                        <p>您还没有收藏任何游戏</p>
                                        <a href="games.html" class="btn btn-primary mt-4">浏览游戏</a>
                                    </div>
                                    <div id="favoritesList" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
                                        <!-- 收藏游戏列表将通过JS加载 -->
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- 游戏记录标签页 -->
                        <section id="historyTab" class="tab-pane">
                            <div class="content-section">
                                <div class="section-header p-4">
                                    <h2 class="text-xl font-bold">最近玩过的游戏</h2>
                                </div>
                                <div class="p-6">
                                    <div id="noHistory" class="text-center py-10 text-gray-400">
                                        <i class="fas fa-gamepad text-4xl mb-4"></i>
                                        <p>您还没有游戏记录</p>
                                        <a href="games.html" class="btn btn-primary mt-4">开始游戏</a>
                                    </div>
                                    <div id="historyList">
                                        <!-- 游戏记录将通过JS加载 -->
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- 安全标签页 -->
                        <section id="securityTab" class="tab-pane">
                            <div class="content-section mb-6">
                                <div class="section-header p-4">
                                    <h2 class="text-xl font-bold">修改密码</h2>
                                </div>
                                <div class="p-6">
                                    <form id="changePasswordForm">
                                        <div class="form-group">
                                            <label for="currentPassword" class="form-label">当前密码</label>
                                            <input type="password" id="currentPassword" class="form-input">
                                            <div class="form-error" id="currentPasswordError"></div>
                                        </div>
                                        <div class="form-group">
                                            <label for="newPassword" class="form-label">新密码</label>
                                            <input type="password" id="newPassword" class="form-input">
                                            <div class="form-error" id="newPasswordError"></div>
                                        </div>
                                        <div class="form-group">
                                            <label for="confirmPassword" class="form-label">确认新密码</label>
                                            <input type="password" id="confirmPassword" class="form-input">
                                            <div class="form-error" id="confirmPasswordError"></div>
                                        </div>
                                        <div class="flex justify-end mt-6">
                                            <button type="submit" class="btn btn-primary">
                                                <i class="fas fa-key mr-2"></i>更新密码
                                            </button>
                                        </div>
                                    </form>
                                </div>
                            </div>

                            <div class="content-section">
                                <div class="section-header p-4">
                                    <h2 class="text-xl font-bold">危险区域</h2>
                                </div>
                                <div class="p-6">
                                    <div class="bg-opacity-50 bg-red-900 p-4 rounded mb-4">
                                        <p class="text-red-300">以下操作将永久删除您的账号和所有数据，此操作无法撤销。</p>
                                    </div>
                                    <button class="btn btn-danger" id="deleteAccountBtn">
                                        <i class="fas fa-trash mr-2"></i>删除我的账号
                                    </button>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>
            </main>
        </div>
        
        <!-- 页脚 -->
        <footer class="site-footer">
            <div class="footer-content">
                <div class="footer-column">
                    <div class="footer-logo">
                        <img src="src/images/logo.png" alt="Sonice在线游戏">
                    </div>
                    <p>Sonice是一个免费的在线游戏平台，提供多种有趣的游戏体验。</p>
                    <div class="social-links">
                        <a href="#" title="微博"><i class="fab fa-weibo"></i></a>
                        <a href="#" title="微信"><i class="fab fa-weixin"></i></a>
                        <a href="#" title="QQ"><i class="fab fa-qq"></i></a>
                    </div>
                </div>
                <div class="footer-column">
                    <h3>信息</h3>
                    <ul>
                        <li><a href="about.html">关于我们</a></li>
                        <li><a href="terms.html">用户协议</a></li>
                        <li><a href="privacy.html">隐私政策</a></li>
                        <li><a href="contact.html">联系我们</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>游戏分类</h3>
                    <ul>
                        <li><a href="games.html?category=puzzle">益智游戏</a></li>
                        <li><a href="games.html?category=action">动作游戏</a></li>
                        <li><a href="games.html?category=strategy">策略游戏</a></li>
                        <li><a href="games.html?category=casual">休闲游戏</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>支持</h3>
                    <ul>
                        <li><a href="faq.html">常见问题</a></li>
                        <li><a href="support.html">技术支持</a></li>
                        <li><a href="report.html">问题反馈</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023 Sonice在线游戏平台. 保留所有权利.</p>
            </div>
        </footer>
    </div>
    
    <!-- 头像选择模态框 -->
    <div class="modal" id="avatarModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="text-xl font-bold">选择头像</h3>
                <span class="modal-close" id="closeAvatarModal">
                    <i class="fas fa-times"></i>
                </span>
            </div>
            <div class="modal-body">
                <div class="avatar-selection-grid" id="avatarGrid">
                    <!-- 头像选项将通过JS加载 -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelAvatar">取消</button>
                <button class="btn btn-primary" id="saveAvatar">
                    <i class="fas fa-check mr-2"></i>保存
                </button>
            </div>
        </div>
    </div>

    <!-- 删除账号确认模态框 -->
    <div class="modal" id="deleteAccountModal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="text-xl font-bold">确认删除账号</h3>
                <span class="modal-close" id="closeDeleteModal">
                    <i class="fas fa-times"></i>
                </span>
            </div>
            <div class="modal-body">
                <div class="bg-opacity-50 bg-red-900 p-4 rounded mb-4">
                    <p class="text-red-300">此操作将永久删除您的账号和所有相关数据，无法恢复。</p>
                </div>
                <p class="mb-4">请输入您的密码以确认此操作：</p>
                <div class="form-group">
                    <input type="password" id="deleteConfirmPassword" class="form-input" placeholder="输入密码确认">
                    <div class="form-error" id="deleteConfirmError"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" id="cancelDelete">取消</button>
                <button class="btn btn-danger" id="confirmDelete">
                    <i class="fas fa-trash mr-2"></i>永久删除账号
                </button>
            </div>
        </div>
    </div>

    <!-- 提示框容器 -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- JavaScript -->
    <script src="src/js/favorites.js"></script>
    <script src="src/js/profile.js"></script>
</body>
</html> 