<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{game.title}} - Play Free Online Game</title>
    <meta name="description" content="{{game.description}}">
    <link rel="icon" type="image/png" href="/src/assets/icons/logo.png">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://sonice.online/games/{{game.slug}}.html">
    <meta property="og:title" content="{{game.title}} - Play Free Online Game">
    <meta property="og:description" content="{{game.description}}">
    <meta property="og:image" content="{{game.image}}">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://sonice.online/games/{{game.slug}}.html">
    <meta property="twitter:title" content="{{game.title}} - Play Free Online Game">
    <meta property="twitter:description" content="{{game.description}}">
    <meta property="twitter:image" content="{{game.image}}">

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "VideoGame",
        "name": "{{game.title}}",
        "description": "{{game.description}}",
        "image": "{{game.image}}",
        "genre": "{% for category in game.categories %}{{category}}{% if not loop.last %}, {% endif %}{% endfor %}",
        "url": "https://sonice.online/games/{{game.slug}}.html"
    }
    </script>

    <link rel="stylesheet" href="/css/style.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome icon library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'dark': '#0F1012',
                        'dark-lighter': '#1A1B1F',
                        'blue-primary': '#0EA5E9',
                        'blue-secondary': '#38BDF8',
                        'blue-bright': '#7DD3FC',
                        'purple-primary': '#7C3AED',
                        'gray-custom': '#2A2B31'
                    }
                }
            }
        }
    </script>
    <style>
        body {
            background: 
                linear-gradient(135deg, rgba(30, 58, 138, 0.95) 0%, rgba(30, 64, 175, 0.95) 25%, rgba(37, 99, 235, 0.95) 50%, rgba(59, 130, 246, 0.95) 75%, rgba(96, 165, 250, 0.95) 100%),
                url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%239BA3EB' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            color: #fff;
            min-height: 100vh;
        }
        
        /* 导航栏样式 */
        .navbar {
            height: 64px;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        /* 搜索框样式 */
        .search-input {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 9999px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 0.5rem 1rem;
            color: white;
            width: 100%;
        }
        
        .search-input:focus {
            outline: none;
            background: rgba(255, 255, 255, 0.15);
            border-color: rgba(255, 255, 255, 0.3);
        }
        
        /* 登录按钮 */
        .login-button {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            transition: background-color 0.3s;
        }
        
        .login-button:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        /* 侧边栏样式 */
        .sidebar {
            background-color: #111827;
            position: fixed;
            top: 64px;
            left: 0;
            width: 64px;
            height: calc(100vh - 64px);
            transition: width 0.3s ease;
            z-index: 40;
            padding: 0;
            overflow-y: auto;
        }
        
        .sidebar.expanded, .sidebar:hover {
            width: 240px;
        }
        
        .sidebar.show {
            left: 0;
            width: 240px;
        }
        
        /* 侧边栏链接 */
        .sidebar-link {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            color: rgba(255, 255, 255, 0.7);
            transition: all 0.3s ease;
            text-decoration: none;
            white-space: nowrap;
        }
        
        .sidebar-link:hover {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }
        
        /* 侧边栏图标 */
        .icon {
            min-width: 24px;
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
        }
        
        /* 侧边栏文本 */
        .text {
            opacity: 0;
            transition: opacity 0.2s ease;
            white-space: nowrap;
        }
        
        .sidebar:hover .text, .sidebar.expanded .text, .sidebar.show .text {
            opacity: 1;
        }
        
        /* 分类标题 */
        .category-header {
            padding: 0.75rem 1rem;
            font-size: 0.75rem;
            font-weight: 600;
            color: rgba(255, 255, 255, 0.4);
            text-transform: uppercase;
            opacity: 0;
            transition: opacity 0.2s ease;
        }
        
        .sidebar:hover .category-header, .sidebar.expanded .category-header, .sidebar.show .category-header {
            opacity: 1;
        }
        
        /* 数字徽章 */
        .badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: 600;
            height: 1.25rem;
            min-width: 1.25rem;
            padding: 0 0.4rem;
            border-radius: 9999px;
            margin-left: auto;
            color: white;
            opacity: 0;
            transition: opacity 0.2s ease;
        }
        
        .sidebar:hover .badge, .sidebar.expanded .badge, .sidebar.show .badge {
            opacity: 1;
        }
        
        /* 数量计数 */
        .count {
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.75rem;
            margin-left: auto;
            opacity: 0;
            transition: opacity 0.2s ease;
        }
        
        .sidebar:hover .count, .sidebar.expanded .count, .sidebar.show .count {
            opacity: 1;
        }

        /* 主内容区域 */
        .main-content {
            margin-left: 64px;
            padding: 2rem;
            transition: margin-left 0.3s ease;
        }
        
        /* 当侧边栏展开时，主内容区域左边距变宽 */
        .main-content.sidebar-expanded {
            margin-left: 240px;
        }
        
        /* 移动设备响应式布局 */
        @media (max-width: 1024px) {
            .main-content, .main-content.sidebar-expanded {
                margin-left: 0;
            }
            
            .sidebar {
                left: -64px;
            }
        }

        /* Game container styles */
        .game-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 2rem;
            margin: 2rem auto;
            max-width: 1400px;
        }

        /* Header Styles */
        .header {
            background: #007AFF;
            color: white;
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            text-decoration: none;
            color: white;
        }

        .nav-menu {
            display: flex;
            gap: 1.5rem;
        }

        .nav-link {
            color: white;
            text-decoration: none;
            font-weight: 500;
            transition: opacity 0.3s;
        }

        .nav-link:hover {
            opacity: 0.8;
        }

        .content-wrapper {
            margin-top: 64px !important;
        }

        .game-wrapper {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 12px;
            overflow: hidden;
            position: relative;
            width: 100%;
            padding-bottom: 56.25%;
            margin: 2rem 0;
        }

        .game-wrapper iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        .game-controls {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1.5rem;
            border-radius: 12px;
            margin: 2rem 0;
            color: white;
        }
        .title-section {
            text-align: center;
            margin-bottom: 1rem;
        }
        .title-section h1 {
            font-size: 2rem;
            font-weight: bold;
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 0.5rem;
            display: inline-block;
            margin-bottom: 0.5rem;
            background: linear-gradient(135deg, rgba(14, 165, 233, 0.8), rgba(56, 189, 248, 0.8));
            box-shadow: 0 4px 15px rgba(14, 165, 233, 0.3);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .game-controls, .game-overview {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }
        .category-tag {
            background: rgba(124, 58, 237, 0.8);
            border-radius: 20px;
            padding: 5px 15px;
            margin: 5px;
            display: inline-block;
        }
        .recommended-games {
            margin-top: 40px;
        }
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }
        .game-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            overflow: hidden;
        }
        .game-card img {
            width: 100%;
            height: 150px;
            object-fit: cover;
        }
        .game-card-content {
            padding: 15px;
        }
        .play-button {
            background: rgba(124, 58, 237, 0.8);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            text-decoration: none;
            display: inline-block;
        }
        .rating-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1.5rem;
            border-radius: 12px;
            margin: 2rem 0;
            text-align: center;
        }
        .rating-title {
            color: white;
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }
        .rating-stars {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        .star {
            cursor: pointer;
            font-size: 2rem;
            color: rgba(255, 255, 255, 0.3);
            transition: color 0.2s;
        }
        .star.active {
            color: #FFD700;
        }
        .rating-count {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
        }
        .game-overview {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 1.5rem;
            border-radius: 12px;
            color: white;
        }
        .game-overview h2 {
            color: white;
            margin-bottom: 1rem;
            font-size: 1.5rem;
            font-weight: 600;
        }
        .game-overview p {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
            margin-bottom: 1.5rem;
        }
        .game-categories {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }
        .category-tag {
            background: rgba(255, 255, 255, 0.15);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.875rem;
            backdrop-filter: blur(4px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        /* Recommended Games Styles */
        .recommended-games {
            margin: 3rem 0;
        }
        .recommended-games h2 {
            color: white;
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
            font-weight: 600;
        }
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
        }
        .game-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
        }
        .game-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
        }
        .game-card img {
            width: 100%;
            height: 150px;
            object-fit: cover;
        }
        .game-card-content {
            padding: 1rem;
        }
        .game-card h3 {
            color: white;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
        .game-card p {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.875rem;
            margin-bottom: 1rem;
            line-height: 1.5;
        }
        .play-button {
            display: inline-block;
            background: rgba(255, 255, 255, 0.15);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 500;
            transition: background-color 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .play-button:hover {
            background: rgba(255, 255, 255, 0.25);
        }
        /* Footer Styles */
        .footer {
            background-color: #1A1B1F;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 4rem;
            padding: 3rem 0;
        }
        .footer-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }
        .footer-section h3 {
            color: white;
            font-size: 1.25rem;
            margin-bottom: 1rem;
        }
        .footer-links {
            list-style: none;
            padding: 0;
        }
        .footer-links li {
            margin-bottom: 0.5rem;
        }
        .footer-links a {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            transition: color 0.3s;
        }
        .footer-links a:hover {
            color: white;
        }
        .copyright {
            text-align: center;
            padding-top: 2rem;
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.875rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: 2rem;
        }
        .categories-section {
            display: flex;
            justify-content: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }
        .description-section {
            max-width: 3xl;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.3);
            padding: 0.5rem 1rem;
            border-radius: 12px;
            line-height: 1.2;
        }
        /* Favorite Button Styles */
        .favorite-btn {
            transition: all 0.2s ease;
            cursor: pointer;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            top: 8px;
            right: 8px;
            z-index: 10;
        }
        .favorite-btn.is-favorite {
            color: #EF4444;
            background: rgba(239, 68, 68, 0.1);
            border-color: rgba(239, 68, 68, 0.3);
        }
        .favorite-btn:hover {
            transform: scale(1.1);
            background: rgba(255, 255, 255, 0.2);
        }
        .favorite-btn.is-favorite:hover {
            background: rgba(239, 68, 68, 0.2);
        }
        .game-actions {
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        /* Toast notification */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 12px 16px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            z-index: 1000;
            opacity: 0;
            transform: translateY(-20px);
            transition: opacity 0.3s, transform 0.3s;
        }
        .toast.success {
            background-color: #10B981;
        }
        .toast.error {
            background-color: #EF4444;
        }
        .toast.show {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
    
    <!-- 加载React和组件脚本 -->
    <script crossorigin src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="app"></div>
    
    <script type="text/babel">
        // 将组件注册到全局命名空间以便在页面中使用
        window.Components = {};
    </script>
    
    <script type="text/babel" src="/src/components/structure.js"></script>
    <script type="text/babel">
        // 确保组件加载成功，否则使用备用组件
        const loadStructureComponents = () => {
            try {
                // 检查是否已加载结构组件
                if (!window.Components.Layout) {
                    console.warn("结构组件加载失败，使用备用组件");
                    
                    // 导航栏组件
                    window.Components.Navbar = () => {
                        return (
                            <nav className="fixed top-0 left-0 right-0 z-40 navbar">
                                <div className="max-w-7xl mx-auto px-4">
                                    <div className="flex justify-between items-center h-full">
                                        {/* Logo */}
                                        <div className="flex items-center">
                                            <a href="/" className="flex items-center">
                                                <img 
                                                    src="/src/assets/icons/logo.png" 
                                                    alt="Sonice" 
                                                    className="h-8 w-8"
                                                    onError={(e) => e.target.src = "/assets/icons/logo.png"}
                                                />
                                                <span className="text-white font-bold text-xl ml-2">Sonice</span>
                                                <span className="text-blue-400 font-bold text-xl ml-1">Games</span>
                                            </a>
                                        </div>
                                        
                                        {/* 搜索框 */}
                                        <div className="flex-1 flex justify-center">
                                            <div className="relative hidden md:block w-full max-w-md">
                                                <input
                                                    type="text"
                                                    placeholder="Search games..."
                                                    className="search-input w-full"
                                                />
                                            </div>
                                        </div>
                                        
                                        {/* 登录按钮 */}
                                        <div className="flex items-center">
                                            <button className="login-button flex items-center">
                                                <span className="mr-1">Login</span>
                                                <i className="fas fa-chevron-down text-xs ml-1"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </nav>
                        );
                    };
                    
                    // 侧边栏组件
                    window.Components.Sidebar = () => {
                        return (
                            <>
                                {/* 移动端侧边栏按钮 */}
                                <div className="fixed bottom-4 right-4 lg:hidden z-40">
                                    <button
                                        className="bg-blue-600 text-white p-3 rounded-full shadow-lg"
                                        aria-label="Toggle sidebar"
                                    >
                                        <i className="fas fa-bars"></i>
                                    </button>
                                </div>
                                
                                {/* 侧边栏 */}
                                <aside className="sidebar">
                                    <div className="flex flex-col h-full py-2">
                                        <div className="flex-1">
                                            <div className="flex flex-col">
                                                {/* 首页 */}
                                                <a href="/index.html" className="sidebar-link">
                                                    <div className="icon">
                                                        <i className="fas fa-home text-purple-500"></i>
                                                    </div>
                                                    <span className="text">Home</span>
                                                </a>
                                                
                                                {/* 收藏 */}
                                                <a href="/favorites.html" className="sidebar-link">
                                                    <div className="icon">
                                                        <i className="fas fa-heart text-red-500"></i>
                                                    </div>
                                                    <span className="text">Favorites</span>
                                                    <span className="badge" style={{backgroundColor: 'rgb(168, 85, 247)'}}>0</span>
                                                </a>
                                                
                                                {/* 最近玩过 */}
                                                <a href="/recent.html" className="sidebar-link">
                                                    <div className="icon">
                                                        <i className="fas fa-history text-blue-300"></i>
                                                    </div>
                                                    <span className="text">Recently Played</span>
                                                </a>
                                                
                                                {/* 新游戏 */}
                                                <a href="/new-games.html" className="sidebar-link">
                                                    <div className="icon">
                                                        <i className="fas fa-gamepad text-green-400"></i>
                                                    </div>
                                                    <span className="text">New Games</span>
                                                    <span className="badge" style={{backgroundColor: 'rgb(59, 130, 246)'}}>12</span>
                                                </a>
                                                
                                                {/* 分类标题 */}
                                                <div className="category-header">Categories</div>
                                                
                                                {/* 动作游戏 */}
                                                <a href="/categories/action.html" className="sidebar-link">
                                                    <div className="icon">
                                                        <i className="fas fa-fire text-orange-400"></i>
                                                    </div>
                                                    <span className="text">Action</span>
                                                    <span className="count">42</span>
                                                </a>
                                                
                                                {/* 赛车游戏 */}
                                                <a href="/categories/racing.html" className="sidebar-link">
                                                    <div className="icon">
                                                        <i className="fas fa-car text-pink-400"></i>
                                                    </div>
                                                    <span className="text">Racing</span>
                                                    <span className="count">28</span>
                                                </a>
                                                
                                                {/* 体育游戏 */}
                                                <a href="/categories/sports.html" className="sidebar-link">
                                                    <div className="icon">
                                                        <i className="fas fa-futbol text-cyan-400"></i>
                                                    </div>
                                                    <span className="text">Sports</span>
                                                    <span className="count">35</span>
                                                </a>
                                                
                                                {/* 射击游戏 */}
                                                <a href="/categories/shooter.html" className="sidebar-link">
                                                    <div className="icon">
                                                        <i className="fas fa-bullseye text-indigo-400"></i>
                                                    </div>
                                                    <span className="text">Shooter</span>
                                                    <span className="count">24</span>
                                                </a>
                                                
                                                {/* 卡牌游戏 */}
                                                <a href="/categories/cards.html" className="sidebar-link">
                                                    <div className="icon">
                                                        <i className="fas fa-square text-purple-400"></i>
                                                    </div>
                                                    <span className="text">Cards</span>
                                                    <span className="count">18</span>
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </aside>
                            </>
                        );
                    };
                    
                    // 底部栏组件
                    window.Components.Footer = () => {
                        return (
                            <footer className="bg-[#1A1B1F] border-t border-white/10 mt-16">
                                <div className="container mx-auto px-6 py-12">
                                    <div className="grid grid-cols-1 md:grid-cols-4 gap-8">
                                        {/* 网站Logo和名称 */}
                                        <div>
                                            <div className="flex flex-col items-center text-center">
                                                <img 
                                                    src="/src/assets/icons/logo.png" 
                                                    alt="Sonice.online Logo" 
                                                    className="h-16 w-16 mb-3 rounded-xl"
                                                    onError={(e) => e.target.src = "/assets/icons/logo.png"}
                                                />
                                                <h2 className="text-white text-xl font-bold mb-1 uppercase tracking-wider">SONICE.ONLINE</h2>
                                                <p className="text-white/70 text-sm">Your Best Gaming Experience</p>
                                            </div>
                                        </div>
                                        
                                        {/* 关于我们 */}
                                        <div>
                                            <h3 className="text-white text-lg font-medium mb-4">About Us</h3>
                                            <p className="text-white/70 text-sm leading-relaxed">
                                                sonice.online is your premier destination for free online games. We offer a wide variety of games across different genres.
                                            </p>
                                        </div>
                                        
                                        {/* 快速链接 */}
                                        <div>
                                            <h3 className="text-white text-lg font-medium mb-4">Quick Links</h3>
                                            <ul className="space-y-2">
                                                <li>
                                                    <a href="/games.html" className="text-white/70 hover:text-white text-sm transition-colors">
                                                        All Games
                                                    </a>
                                                </li>
                                                <li>
                                                    <a href="/categories.html" className="text-white/70 hover:text-white text-sm transition-colors">
                                                        Categories
                                                    </a>
                                                </li>
                                                <li>
                                                    <a href="/about.html" className="text-white/70 hover:text-white text-sm transition-colors">
                                                        About Us
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                        
                                        {/* 分类 */}
                                        <div>
                                            <h3 className="text-white text-lg font-medium mb-4">Categories</h3>
                                            <ul className="space-y-2">
                                                <li>
                                                    <a href="/categories/action.html" className="text-white/70 hover:text-white text-sm transition-colors">
                                                        Action
                                                    </a>
                                                </li>
                                                <li>
                                                    <a href="/categories/racing.html" className="text-white/70 hover:text-white text-sm transition-colors">
                                                        Racing
                                                    </a>
                                                </li>
                                                <li>
                                                    <a href="/categories/sports.html" className="text-white/70 hover:text-white text-sm transition-colors">
                                                        Sports
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    {/* 版权信息 */}
                                    <div className="border-t border-white/10 mt-8 pt-8 text-center">
                                        <p className="text-white/50 text-sm">
                                            &copy; {new Date().getFullYear()} sonice.online. All rights reserved.
                                        </p>
                                    </div>
                                </div>
                            </footer>
                        );
                    };
                    
                    // 布局组件
                    window.Components.Layout = ({ children }) => {
                        return (
                            <div className="flex flex-col min-h-screen">
                                <window.Components.Navbar />
                                <div className="flex-1 pt-[64px]">
                                    <window.Components.Sidebar />
                                    <main className="main-content">
                                        {children}
                                    </main>
                                </div>
                                <window.Components.Footer />
                            </div>
                        );
                    };
                }
                console.log("组件注册成功");
            } catch (error) {
                console.error("组件注册失败:", error);
            }
        };
        
        // 确保组件加载
        loadStructureComponents();
        
        // 游戏内容组件
        const GameContent = () => {
            return (
                <div className="game-container">
                    <div className="title-section">
                        <h1>{{game.title}}</h1>
                        
                        <div className="flex justify-center gap-2 mb-2">
                            {% for category in game.categories %}
                            <span className="px-3 py-1 rounded-full text-sm bg-purple-600 bg-opacity-70">{{category}}</span>
                            {% endfor %}
                        </div>
                        
                        <div className="max-w-3xl mx-auto bg-black bg-opacity-30 p-2 rounded-lg">
                            <p className="text-white text-lg">{{game.description}}</p>
                        </div>
                    </div>
                    
                    {/* 游戏框架 */}
                    <div className="game-wrapper">
                        <iframe src="{{game.iframe_url}}" frameBorder="0" allowFullScreen></iframe>
                    </div>

                    {/* 游戏控制说明 */}
                    <div className="bg-black bg-opacity-50 p-6 rounded-xl mb-6">
                        <h2 className="text-2xl font-bold mb-4">Game Controls</h2>
                        <p className="text-gray-300">{{game.controls}}</p>
                    </div>

                    {/* 游戏概述 */}
                    <div className="bg-black bg-opacity-50 p-6 rounded-xl mb-8">
                        <h2 className="text-2xl font-bold mb-4">Game Overview</h2>
                        <p className="text-gray-300 mb-4">{{game.description}}</p>
                        
                        <div className="flex flex-wrap gap-2">
                            {% for category in game.categories %}
                            <span className="px-3 py-1 rounded-full text-sm bg-purple-600 bg-opacity-70">{{category}}</span>
                            {% endfor %}
                        </div>
                    </div>

                    {/* 推荐游戏 */}
                    <div className="mt-12">
                        <h2 className="text-2xl font-bold mb-6">You May Also Like</h2>
                        <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6">
                            {% for related_game in game.related_games %}
                            <div className="game-card">
                                <img 
                                    src="{{related_game.image}}" 
                                    alt="{{related_game.title}}" 
                                    onError={(e) => {
                                        e.target.onerror = null;
                                        e.target.src = '/assets/images/default-game.webp';
                                    }}
                                />
                                <div className="game-card-content">
                                    <h3 className="text-lg font-medium mb-2">{{related_game.title}}</h3>
                                    <p className="text-gray-300 text-sm mb-4">{{related_game.description}}</p>
                                    <a href="{{related_game.url}}" className="play-button">Play Now</a>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>

                    {/* 评分组件 */}
                    <div className="rating-section">
                        <h2 className="text-2xl font-bold mb-4">Rate This Game</h2>
                        <div className="rating-stars">
                            <span className="star" data-rating="1">★</span>
                            <span className="star" data-rating="2">★</span>
                            <span className="star" data-rating="3">★</span>
                            <span className="star" data-rating="4">★</span>
                            <span className="star" data-rating="5">★</span>
                        </div>
                        <div className="text-gray-300 text-sm">
                            Average Rating: <span id="avgRating">{{game.rating|default('4.5')}}</span>/5
                            (<span id="ratingCount">{{game.rating_count|default('128')}}</span> votes)
                        </div>
                    </div>
                </div>
            );
        };

        // 主应用组件
        const App = () => {
            const { Layout } = window.Components;
            
            return (
                <Layout>
                    <GameContent />
                </Layout>
            );
        };
        
        // 等待DOM加载完成后渲染
        document.addEventListener('DOMContentLoaded', () => {
            ReactDOM.render(<App />, document.getElementById('app'));
            
            // 初始化评分功能
            const stars = document.querySelectorAll('.star');
            let userRating = 0;

            stars.forEach(star => {
                star.addEventListener('mouseover', () => {
                    const rating = parseInt(star.dataset.rating);
                    highlightStars(rating);
                });

                star.addEventListener('mouseout', () => {
                    highlightStars(userRating);
                });

                star.addEventListener('click', () => {
                    userRating = parseInt(star.dataset.rating);
                    highlightStars(userRating);
                    // 保存评分
                    saveRating(userRating);
                });
            });

            function highlightStars(rating) {
                stars.forEach(star => {
                    const starRating = parseInt(star.dataset.rating);
                    star.classList.toggle('active', starRating <= rating);
                });
            }

            function saveRating(rating) {
                // 模拟保存评分
                const avgRatingEl = document.getElementById('avgRating');
                const ratingCountEl = document.getElementById('ratingCount');
                
                let currentCount = parseInt(ratingCountEl.textContent);
                let currentAvg = parseFloat(avgRatingEl.textContent);
                
                // 计算新的平均分
                const newCount = currentCount + 1;
                const newAvg = ((currentAvg * currentCount) + rating) / newCount;
                
                // 更新显示
                avgRatingEl.textContent = newAvg.toFixed(1);
                ratingCountEl.textContent = newCount;
            }
        });
    </script>
</body>
</html> 