{% import "icons.twig" as icons %}

{% if categories is not defined or categories is null %}
    {% set categories = [] %}
{% endif %}

<!-- Sidebar -->
<nav id="sidebar" class="group fixed left-0 top-16 bottom-0 h-[calc(100vh-4rem)] w-14 hover:w-56 bg-sidebar-blue flex flex-col z-20 transition-all duration-300 ease-in-out overflow-hidden">
    <!-- 顶部LOGO，与导航栏对齐 -->
    {#
    <div class="flex items-center justify-center mt-2 mb-2" style="height:48px;">
        <a href="{{ base_url }}/" class="flex items-center justify-center">
            <img src="{{ base_url }}/assets/images/icons/logo.png" alt="Sonice Games" style="width:32px;height:32px;">
        </a>
    </div>
    #}
    <div class="flex-1 py-2 overflow-y-auto" style="scrollbar-width:none; -ms-overflow-style:none; overflow-y:scroll;">
        <style>.overflow-y-auto::-webkit-scrollbar { display:none!important; width:0!important; height:0!important; background:transparent!important; }</style>
        <ul class="mt-2">
            <!-- 首页 -->
            <li>
                <a href="{{ base_url }}/" class="flex items-center px-0 hover:px-4 rounded-lg transition-all duration-200 hover:bg-sidebar-hover">
                    <span style="width:48px;height:48px;display:flex;align-items:center;justify-content:center;margin-left:8px;padding:0;box-sizing:border-box;">
                        <i class="fa-solid fa-home text-2xl" style="color:#3b82f6;"></i>
                    </span>
                    <span class="ml-2 text-gray-100 font-medium text-base opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap">Home</span>
                </a>
            </li>
            <!-- 收藏 -->
            <li>
                <a href="{{ base_url }}/favorites" class="flex items-center px-0 hover:px-4 rounded-lg transition-all duration-200 hover:bg-sidebar-hover">
                    <span style="width:48px;height:48px;display:flex;align-items:center;justify-content:center;margin-left:8px;padding:0;box-sizing:border-box;">
                        <i class="fa-solid fa-heart text-2xl" style="color:#ef476f;"></i>
                    </span>
                    <span class="ml-2 text-gray-100 font-medium text-base opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap">Favorites</span>
                </a>
            </li>
            <!-- 最近游玩 -->
            <li>
                <a href="{{ base_url }}/recently-played" class="flex items-center px-0 hover:px-4 rounded-lg transition-all duration-200 hover:bg-sidebar-hover">
                    <span style="width:48px;height:48px;display:flex;align-items:center;justify-content:center;margin-left:8px;padding:0;box-sizing:border-box;">
                        <i class="fa-solid fa-history text-2xl" style="color:#06d6a0;"></i>
                    </span>
                    <span class="ml-2 text-gray-100 font-medium text-base opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap">Recently Played</span>
                </a>
            </li>
        </ul>
        <!-- 分类 -->
        <div class="mt-2">
            <h3 class="px-2 text-xs font-semibold text-gray-300 uppercase tracking-wider opacity-0 group-hover:opacity-100 transition-opacity duration-200">Categories</h3>
            <ul class="mt-2">
                {% for category in categories %}
                <li>
                    <a href="{{ base_url }}/category/{{ category.slug }}" class="flex items-center px-0 hover:px-4 rounded-lg transition-all duration-200 hover:bg-sidebar-hover">
                        <span style="width:48px;height:48px;display:flex;align-items:center;justify-content:center;margin-left:8px;padding:0;box-sizing:border-box;">
                            <i class="{{ category.icon }} text-2xl" style="color: {{ category.color }};"></i>
                        </span>
                        <span class="ml-2 text-gray-100 font-medium text-base opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap">{{ category.name }}</span>
                    </a>
                </li>
                {% endfor %}
            </ul>
        </div>
        <!-- 这里插入原sidebar-footer内容，去掉sidebar-footer类 -->
        <div class="w-full py-4 flex flex-col items-center justify-center gap-2">
            <a href="{{ base_url }}/" class="flex items-center justify-center mb-2">
                <span style="width:48px;height:48px;display:flex;align-items:center;justify-content:center;">
                    <img src="{{ base_url }}/assets/images/icons/logo.png" alt="Sonice Games"
                         class="w-8 h-8 transition-all duration-200" />
                </span>
            </a>
            <div class="flex flex-col items-center w-full opacity-0 group-hover:opacity-100 transition-opacity duration-200">
                <span class="mt-2 text-lg font-bold text-white whitespace-nowrap">
                    Sonice<span class="text-blue-400">.Games</span>
                </span>
                <p class="text-xs text-gray-200 text-center whitespace-nowrap mb-2">
                    Play the best online games for free. New games added daily!
                </p>
                <div class="flex space-x-3 mt-1 mb-2">
                    <a href="#" class="text-gray-300 hover:text-white"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="text-gray-300 hover:text-white"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="text-gray-300 hover:text-white"><i class="fab fa-discord"></i></a>
                </div>
                <!-- Quick Links -->
                <div class="w-full mt-2">
                    <h3 class="text-base font-semibold mb-2 text-white text-center">Quick Links</h3>
                    <ul class="space-y-1 text-center">
                        <li><a href="{{ base_url }}/about" class="hover:text-blue-300 text-gray-300">About Us</a></li>
                        <li><a href="{{ base_url }}/contact" class="hover:text-blue-300 text-gray-300">Contact</a></li>
                        <li><a href="{{ base_url }}/privacy" class="hover:text-blue-300 text-gray-300">Privacy Policy</a></li>
                        <li><a href="{{ base_url }}/terms" class="hover:text-blue-300 text-gray-300">Terms of Service</a></li>
                    </ul>
                </div>
                <!-- Newsletter -->
                <div class="w-full mt-4">
                    <h3 class="text-base font-semibold mb-2 text-white text-center">Newsletter</h3>
                    <p class="text-gray-300 mb-2 text-xs text-center">Subscribe to get updates on new games and features.</p>
                    <form class="flex flex-col space-y-2 items-center">
                        <input type="email" placeholder="Your email address" class="px-3 py-2 rounded bg-white/20 text-white placeholder-gray-300 focus:outline-none focus:bg-white/30 w-full" />
                        <button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 rounded w-full">Subscribe</button>
                    </form>
                </div>
                <!-- 版权 -->
                <span class="text-xs text-gray-300 mt-4 whitespace-nowrap block text-center">
                    © 2024 Sonice.Games. All rights reserved.
                </span>
            </div>
        </div>
    </div>
</nav> 